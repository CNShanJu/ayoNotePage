# VUE数组的更新检测(重点)

1. vue里不能通过索引值去直接更改数组，因为直接更改数组视图不会更新
2. 修改数组长度的长度的时候，视图也不会得到更新

 Vue为了增加列表渲染的功能，增加了一组观察数组的方法，而且可以显示一个数组的过滤或排序的副本。

### 变异方法

Vue 包含一组观察数组的变异方法，它们将会触发视图更新，包含以下方法：

```markdown
`push()` 接收任意数量的参数，把它们逐个添加到数组末尾，并返回修改后数组的长度
`pop()` 从数组末尾移除最后一项，减少数组的length值，然后返回移除的项
`shift()` 移除数组中的第一个项并返回该项，同时数组的长度减1
`unshift()` 在数组前端添加任意个项并返回新数组长度
`splice()` 删除原数组的一部分成员，并可以在被删除的位置添加入新的数组成员
`sort()` 调用每个数组项的toString()方法，然后比较得到的字符串排序，返回经过排序之后的数组
`reverse()` 用于反转数组的顺序，返回经过排序之后的数组
```

> 对应`变异方法`来说，执行它们后，`原数组`的`数据`会发生`改变`

### 非变异方法

> 对于`非变异方法`来说`不会`改变`原始数组`，而是`总是返回`一个`新数组`。

```markdown
`concat()` 先创建当前数组一个副本，然后将接收到的参数添加到这个副本的末尾，最后返回新构建的数组。
`slice()` 基于当前数组中一个或多个项创建一个新数组，接受一个或两个参数，即要返回项的起始和结束位置，最后返回新数组。
`map()` 对数组的每一项运行给定函数，返回每次函数调用的结果组成的数组、
`filter()` 对数组中的每一项运行给定函数，该函数会返回true的项组成的数组
```

 **以上操作并不会导致Vue丢弃现有DOM并重新渲染整个列表。Vue实现了一些智能启发式方法来最大化DOM元素重用，所以用一个含有相同元素的数组去替换原来的数组是非常高效的操作**。

###  set方法

由于JS的限制， Vue `不能检测`以下变动的数组(即不能更新页面数据展示)：

1. 利用`索引`直接设置一个`项`时，例如：` vm.items[indexOfItem] = newValue`
2. 修改`数组的长度`时，例如：` vm.items.length = newLength`

以下两种方式都可以实现和vm.items[indexOfItem]=newValue相同的效果， 同时也将`触发状态更新`

```js
// Vue.set
Vue.set(vm.item, indexOfItem, newValue);			//利用vue原型方法执行
vm.$set(vm.item,indexofitem,newvalue);					//实例对象方法执行

/*
第一个参数：当前要更新的数组
第二个参数：下标
第三个参数：更新的值
*/

// Array.prototype.splice
arr.items.splice(indexOfItem, 1, newValue)
```



 